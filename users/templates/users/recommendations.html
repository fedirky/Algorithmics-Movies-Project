{% extends 'base.html' %}

{% block title %}Movies Recommendations{% endblock %}

{% block content %}
<div class="container my-4">
    <h1 class="text-center mb-4">üé¨ Movies Recommendations</h1>

    <div class="row">
        <!-- Left Column -->
        <div class="col-md-6">
            <div class="p-4 border rounded shadow-sm bg-light mb-4">
                <h2 class="fw-bold my-2">Highly Recommended Films</h2>
                {% if highly_recommended_movies %}
                    <div class="list-group mt-2">
                        {% for movie in highly_recommended_movies %}
                            <a href="{% url 'movie_detail' movie_id=movie.movie_id %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-1">{{ movie.movie_name }}</h6>
                                    <p class="mb-1"><strong>Genres:</strong> 
                                        {% for genre in movie.genres.all %}
                                            <span class="badge bg-secondary">{{ genre.name }}</span>
                                        {% endfor %}
                                    </p>
                                </div>
                                <span class="badge bg-primary rounded-pill">‚≠ê {{ movie.rating }}</span>
                            </a>
                        {% endfor %}
                    </div>
                {% else %}
                    <p class="text-muted">No highly recommended films found.</p>
                {% endif %}
            </div>

            <div class="p-4 border rounded shadow-sm bg-light mb-4">
                <h2 class="fw-bold my-2">Popular Films</h2>
                {% if popular_movies %}
                    <div class="list-group mt-2">
                        {% for movie in popular_movies %}
                            <a href="{% url 'movie_detail' movie_id=movie.movie_id %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-1">{{ movie.movie_name }}</h6>
                                    <small class="text-muted">Votes: {{ movie.votes }}</small>
                                </div>
                                <span class="badge bg-success rounded-pill">üî• Popular</span>
                            </a>
                        {% endfor %}
                    </div>
                {% else %}
                    <p class="text-muted">No popular films found.</p>
                {% endif %}
            </div>

            <div class="p-4 border rounded shadow-sm bg-light mb-4">
                <h2 class="fw-bold my-2">Films You Would Like</h2>
                {% if films_you_would_like_movies %}
                    <div class="list-group mt-2">
                        {% for movie in films_you_would_like_movies %}
                            <a href="{% url 'movie_detail' movie_id=movie.movie_id %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-1">{{ movie.movie_name }}</h6>
                                    <small class="text-muted">Year: {{ movie.year }}</small>
                                </div>
                                <span class="badge bg-primary rounded-pill">‚≠ê {{ movie.rating }}</span>
                            </a>
                        {% endfor %}
                    </div>
                {% else %}
                    <p class="text-muted">No films found that you might like.</p>
                {% endif %}
            </div>
        </div>

        <!-- Right Column -->
        <div class="col-md-6">
            <div class="p-4 border rounded shadow-sm bg-light mb-4">
                <h2 class="fw-bold my-2">Kids Films</h2>
                {% if kids_movies %}
                    <div class="list-group mt-2">
                        {% for movie in kids_movies %}
                            <a href="{% url 'movie_detail' movie_id=movie.movie_id %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-1">{{ movie.movie_name }}</h6>
                                    <small class="text-muted">Certificate: {{ movie.certificate }}</small>
                                </div>
                                <span class="badge bg-info rounded-pill">üë∂ Kids</span>
                            </a>
                        {% endfor %}
                    </div>
                {% else %}
                    <p class="text-muted">No kids films found.</p>
                {% endif %}
            </div>

            <div class="p-4 border rounded shadow-sm bg-light mb-4">
                <h2 class="fw-bold my-2">Recent Films</h2>
                {% if recent_movies %}
                    <div class="list-group mt-2">
                        {% for movie in recent_movies %}
                            <a href="{% url 'movie_detail' movie_id=movie.movie_id %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-1">{{ movie.movie_name }}</h6>
                                    <small class="text-muted">Year: {{ movie.year }}</small>
                                </div>
                                <span class="badge bg-warning rounded-pill">üÜï New</span>
                            </a>
                        {% endfor %}
                    </div>
                {% else %}
                    <p class="text-muted">No recent films found.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
