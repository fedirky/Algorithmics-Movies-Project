{% extends 'base.html' %}

{% block title %}Movies Recommendations{% endblock %}

{% block content %}
<div class="container my-4">
    <h1 class="text-center mb-4">üéÆ Movies Recommendations</h1>

    <!-- Recommendations Section -->
    <div class="row">
        <div class="col-md-12 mb-4">
            {% if found_movies %}
                {% for tag_combo, movies in found_movies %}
                    <div class="p-4 border rounded shadow-sm bg-light mb-4">
                        <h5 class="fw-bold mt-2">
                            Tags: 
                            {% for tag in tag_combo %}
                                <span class="badge bg-secondary">{{ tag }}</span>
                            {% endfor %}
                        </h5>
                        <div class="list-group mt-2">
                            {% for movie in movies %}
                                <a href="{% url 'movie_detail' movie_id=movie.movie_id %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="mb-1">{{ movie.movie_name }}</h6>
                                        <small class="text-muted">Year: {{ movie.year }}</small>
                                        <p class="mb-1"><strong>Genres:</strong> 
                                            {% for genre in movie.genres.all %}
                                                <span class="badge bg-secondary">{{ genre.name }}</span>
                                            {% endfor %}
                                        </p>
                                    </div>
                                    <span class="badge bg-primary rounded-pill">‚≠ê {{ movie.rating }}</span>
                                </a>
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <p class="text-muted text-center">No recommendations found based on your preferences.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

